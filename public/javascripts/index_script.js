// Generated by CoffeeScript 1.6.2
var show;

$(function() {
  var dispararMensagem, socket;

  socket = io.connect();
  socket.on('news', function(data) {
    return show(data);
  });
  $("#dialog-conversa").dialog({
    width: 400
  });
  $('#msg').keypress(function(event) {
    if (event.which === 13) {
      dispararMensagem();
      return event.preventDefault();
    }
  });
  $('#botao-enviar').button({
    icons: {
      primary: "ui-icon-plus"
    }
  }).click(function() {
    return dispararMensagem();
  });
  return dispararMensagem = function() {
    var inputmsg, msg;

    inputmsg = $('#msg');
    msg = inputmsg.val();
    inputmsg.val('');
    return socket.emit('message', {
      mensagem: msg,
      author: $("#autor").val()
    });
  };
});

show = function(data) {
  $('#dialog-historico').append("<span>" + data.author + ":<br />&nbsp;&nbsp;" + data.mensagem + "</span><br />");
  return $('#dialog-historico').animate({
    scrollTop: $('#dialog-historico').prop("scrollHeight")
  }, 500);
};
